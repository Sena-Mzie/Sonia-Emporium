<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Details</title>
  <style>
    /* Global Styles */
    body, h1, h2, p, label, select, button {
        margin: 0;
        padding: 0;
        color: #333;
    }
    body {
        font-family: 'Montserrat', sans-serif;
        background-color: #f9f9f9;
    }
    h1, h2, h3 { font-family: 'Cormorant Garamond', serif; }

    /* Layout Components */
    header, footer {
        background: #333;
        color: #fff;
        padding: 15px 40px;
        text-align: center;
        font-size: 14px;
    }
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: fixed;
        width: 100%;
        top: 0;
        background-color: #fff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        z-index: 1000;
    }
    nav ul {
        display: flex;
        list-style: none;
    }
    nav ul li a {
        padding: 10px 20px;
        text-decoration: none;
        color: #333;
        font-size: 15px;
        transition: 0.3s;
    }
    nav ul li a:hover {
        color: #c9a77c;
        transform: scale(1.1);
    }

    /* Product & Button Styles */
    #productDetails, #recommendedProducts {
        margin: 120px auto;
        padding: 40px;
        max-width: 800px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }
    #productName { font-size: 30px; text-align: center; }
    #productPrice { color: #c9a77c; font-size: 24px; }
    .centered { text-align: center; }
    #productImage, .recommended-product-card img {
        width: 100%;
        max-width: 400px;
        border-radius: 10px;
    }
    #addToCart, #goToCart, #returnToShop {
        background-color: #333;
        color: #fff;
        padding: 12px 35px;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.3s;
    }
    #addToCart:hover, #goToCart:hover, #returnToShop:hover { background-color: #555; }

    /* Responsive */
    @media (max-width: 768px) {
        #productDetails, #recommendedProducts { padding: 20px; }
        #productName { font-size: 24px; }
        nav ul li a { padding: 8px 10px; font-size: 13px; }
    }
  </style>
</head>
<body>

  <!--HEADER-->
  <header>
    <h1>SONIA EMPORIUM</h1>
    <nav>
        <ul>
            <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="shop.html"><i class="fas fa-shopping-bag"></i> Shop</a></li>
            <li><a href="about.html"><i class="fas fa-info-circle"></i> About</a></li>
            <li><a href="contact.html"><i class="fas fa-phone"></i> Contact</a></li>
            <li><a href="account.html"><i class="fas fa-user"></i> My Account</a></li>
        </ul>
    </nav>
</header>

  <!-- Product Details Section -->
  <section id="productDetails">
    <div class="product-image centered">
      <img id="productImage" alt="Product Image">
    </div>
    <div class="product-info centered">
      <h1 id="productName"></h1>
      <p id="productDescription"></p>
      <p id="productPrice"></p>
      <div id="productSizes">
        <label for="sizeSelector">Choose Size:</label>
        <select id="sizeSelector">
          <!-- Sizes will be populated here -->
        </select>
      </div>
      <button id="addToCart">Add to Cart</button>
      <button id="goToCart">Go to Cart</button>
      <button id="returnToShop">Return to Shop</button>
    </div>
  </section>

  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.2/firebase-app.js";
import { getFirestore, doc, getDoc, collection, query, where, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/9.1.2/firebase-firestore.js";

// Firebase configuration
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_AUTH_DOMAIN",
  projectId: "YOUR_PROJECT_ID",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Retrieve Product ID from URL
const urlParams = new URLSearchParams(window.location.search);
const productId = urlParams.get('id');

// Elements for displaying product details
const productNameElem = document.getElementById('productName');
const productDescriptionElem = document.getElementById('productDescription');
const productPriceElem = document.getElementById('productPrice');
const sizeSelectorElem = document.getElementById('sizeSelector');
const productImageElem = document.getElementById('productImage');

// Load Product Details
async function loadProductDetails() {
  try {
    const productRef = doc(db, "product", productId);
    const productSnapshot = await getDoc(productRef);

    if (productSnapshot.exists()) {
      const productData = productSnapshot.data();
      
      // Populate the product details
      productNameElem.textContent = productData.name;
      productDescriptionElem.textContent = productData.description;
      productPriceElem.textContent = `R${productData.price}`;
      productImageElem.src = productData.image || "default-image.jpg";

      // Populate sizes in dropdown
      productData.size.forEach(size => {
        const option = document.createElement("option");
        option.value = size;
        option.textContent = size;
        sizeSelectorElem.appendChild(option);
      });

      // Load recommended products
      loadRecommendedProducts(productData.category);
    } else {
      console.error("Product not found!");
    }
  } catch (error) {
    console.error("Error loading product details:", error);
  }
}

// Add Product to Cart
document.getElementById('addToCart').addEventListener('click', async () => {
  const selectedSize = sizeSelectorElem.value;

  if (!selectedSize) {
    alert("Please select a size.");
    return;
  }

  try {
    const cartItem = {
      productId: productId,
      name: productNameElem.textContent,
      price: parseFloat(productPriceElem.textContent.replace("R", "")),
      size: selectedSize,
    };

    await addDoc(collection(db, "cart"), cartItem);
    alert("Product added to cart!");
  } catch (error) {
    console.error("Error adding product to cart:", error);
  }
});

// Button Navigation
document.getElementById('goToCart').onclick = () => window.location.href = 'cart.html';
document.getElementById('returnToShop').onclick = () => window.location.href = 'shop.html';

// Load the product details on page load
loadProductDetails();

  </script>
</body>
</html>
